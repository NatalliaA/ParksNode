<% layout('layouts/boilerplate') %>

<div class="row mt-5">
    
    <div class="col-lg-6 offset-lg-3">
      <div class='card shadow'>
        <div class='card-body'>
          <h2 class="text-center">Edit</h2>
        <form action='/parks/<%= park._id %>?_method=PUT' method='POST' 
            class='needs-validation' novalidate enctype="multipart/form-data">
            <div class='mb-3'>
            <label class='form-label' for='title'>Title</label>
            <input class='form-control' type='text' id='title' name='park[title]' value='<%= park.title %>' autofocus required>
            <div class='valid-feedback'>Looks good!</div>
            <div class="invalid-feedback">Please add a title.</div>
            </div>
            <div class='mb-3'>
            <label class='form-label' for='location'>Location</label>
            <input class='form-control' type='text' id='location' name='park[location]'
            value='<%= park.location %>' required>
            <div class='valid-feedback'>Looks good!</div>
            <div class="invalid-feedback">Please add a location.</div>
            </div>
              <div class='mb-3'>
                <label class='form-label' for='price'>Price per night</label>
                <div class="input-group">
                <span class="input-group-text" id="price-label">$</span>
                <input id="price" type="number" class="form-control" name='park[price]' required
                value='<%= park.price %>' aria-label="price" aria-describedby="price-label">
                <div class='valid-feedback'>Looks good!</div>
                <div class="invalid-feedback">Please add a price.</div>
              </div>
              </div>                      
            <div class='mb-3'>
            <label class='form-label' for='description'>Description</label>
            <textarea class='form-control' rows='5' type='text' id='description' name='park[description]' 
            required><%= park.description %></textarea> 
            <div class='valid-feedback'>Looks good!</div>
            <div class="invalid-feedback">Please add a description.</div> 
            </div>
            <div class="mb-3">
                <label for="image" class="form-label">Change Image(s)</label>
                <input class="form-control" type="file" id="image" name='image' multiple>                        
              </div>  

              <div class="mb-4">                  
                <% park.images.forEach(function(img, i) { %>
                    <div class='mb-2'>
                    <img src='<%= img.thumbnail %>' class='img-thumbnail' alt=''>
                    <div class="form-check-inline">
                        <input type="checkbox" id='image-<%=i%>' name='deleteImages[]' value='<%=img.filename%>'>
                    </div>
                    <lable for='image-<%=i%>'>Delete</lable>
                    </div>                   
               <% }) %>               
              </div>

            <div class='mb-3'>
                <button class='btn btn-primary btn-block'>Save</button>                
            </div>
        </form>   
    </div>
    </div>

<div class='mb-3 mt-3'>
<a href='/parks'>All Parks</a>
</div>
</div>
</div>

